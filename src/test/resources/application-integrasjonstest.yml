# Integrasjonstest konfigurasjon
# Minimal konfig for integrasjonstester - kun datasource og Unleash greier

# ============================================================================
# Spring konfigurasjon
# ============================================================================
spring:
    datasource:
        driver-class-name: org.testcontainers.jdbc.ContainerDatabaseDriver
        url: jdbc:tc:postgresql:17:///testdb
        username: test
        password: test
        hikari:
            maximum-pool-size: 3
            connection-test-query: "select 1"
            max-lifetime: 900000
            minimum-idle: 1
            data-source-properties:
                sslmode: disable
    lifecycle:
        timeout-per-shutdown-phase: 3s
    security:
        oauth2:
            resourceserver:
                jwt:
                    issuer-uri: https://login.microsoftonline.com/test-tenant/v2.0
                    audiences: test-client-id

# ============================================================================
# Scheduling konfigurasjon
# ============================================================================
scheduling:
    enabled: false

# ============================================================================
# Azure AD konfigurasjon (Mock-verdier for tester)
# ============================================================================
azure:
    app:
        tenant:
            id: test-tenant
        client:
            id: test-client-id

AZURE_OPENID_CONFIG_ISSUER: https://login.microsoftonline.com/test-tenant/v2.0
AZURE_APP_CLIENT_ID: test-client-id
AZURE_APP_TENANT_ID: test-tenant

# ============================================================================
# Unleash konfigurasjon (Feature Toggles)
# ============================================================================
unleash:
    enabled: false

UNLEASH_SERVER_API_URL: http://localhost:4242/api
UNLEASH_SERVER_API_TOKEN: token
UNLEASH_SERVER_API_ENV: server-env

NAIS_APP_NAME: gjenlevende-bs-sak
